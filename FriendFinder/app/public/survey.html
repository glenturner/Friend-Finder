<!doctype html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport"
         content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">

   <title> Survey | Express </title>
   <!-- Latest compiled and minified CSS -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">


<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- <script src="assets/javascript/app.js"></script> -->

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.min.css">

<!-- JS -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.jquery.min.js"></script>
<!-- 
   <link rel="stylesheet" href="/Users/mmiller/Desktop/Week-13/Friend-Finder/FriendFinder/app/assets/style.css "> -->
</head>
<body>
<style> .jumbotron {
   background-color: #000080;
   color: white;
   margin: 30px;
}

.btn {
   margin: 10px;
   background-color: #000080;
}
span {
   margin: 5px;
}

.fa {
   margin-right: 10px;
}

.panel-default > .panel-heading {
color: white;

}

#headerDiv {
   background-color: #000080;
}

.form-control {
   width: 90%;
}

.well {
   margin:10px;
}</style>

<div class="container">
   <div class="jumbotron text-center">
   <h1><span class="glyphicon glyphicon-list-alt"></span>Friends Finder Survey</h1>
   </div>
   <div class="row"></div>
   <div class="col-12-sm">
   <div class="panel panel-default">
      <div id="headerDiv" class="panel-heading">About You</div>
      <div class="container">
     
      <form id="form" action="">
         <label for="input">Name (Required)</label>
         <input type="text" class="form-control" id="name" placeholder="John Doe" required><br>
         <label for="input">Link to Photo Image (Required)</label>
         <input type="link" class="form-control"  id="photo" placeholder="http://i39.tinypic.com/1zvbr6b.jpg" required><br>
             
         
   </form>
   </div>

</div>
   <div class="panel panel-default">
      <div id="headerDiv" class="panel-heading">Survey</div>
      <div class="container">
      <div class="panel-body">
 <h3>Question 1<br>
   <hr>
Your mind is always buzzing with unexplored ideas and plans.</h3>
        <select data-placeholder="Select an Option" class="chosen-select" id="q1">Select an Option
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2 </option>
          <option value="3">3 </option>
          <option value="4">4 </option>
          <option value="5">5 (Strongly Agree)</option>
        </select>

   <h3>Question 2<br>
   <hr>
Generally speaking, you rely more on your experience than your imagination.</h3>
        <select data-placeholder="" class="chosen-select" id="q2">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2 </option>
          <option value="3">3 </option>
          <option value="4">4 </option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
    
  <h3>Question 3<br>
   <hr>
You find it easy to stay relaxed and focused even when there is some pressure.</h3>
      <select data-placeholder="" class="chosen-select" id="q3">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

 <h3>Question 4<br>
   <hr>
You rarely do something just out of sheer curiosity.</h3>
      <select data-placeholder="" class="chosen-select" id="q4">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

    <h3>Question 5<br>
   <hr>
People can rarely upset you.</h3>
      <select data-placeholder="" class="chosen-select" id="q5">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

 <h3>Question 6<br>
   <hr>
It is often difficult for you to relate to other people’s feelings.</h3>
      <select data-placeholder="" class="chosen-select" id="q6">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

   <h3>Question 7<br>
   <hr>
In a discussion, truth should be more important than people’s sensitivities.</h3>
      <select data-placeholder="" class="chosen-select" id="q7">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

    <h3>Question 8<br>
   <hr>
You rarely get carried away by fantasies and ideas.</h3>
      <select data-placeholder="" class="chosen-select" id="q8">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

    <h3>Question 9<br>
   <hr>
You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h3>
      <select data-placeholder="" class="chosen-select" id="q9">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

  <h3>Question 10<br>
   <hr>
You feel more energetic after spending time with a group of people.</h3>
      <select data-placeholder="" class="chosen-select" id="q10">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
      </div>

<button type="button" id="submit" class="btn btn-info">Submit</button>

   </div>
  

</div>
</div>
<!-- Modal -->
  <div id="resultsModal" class="modal fade" role="dialog">
    
    <div class="modal-dialog">
      
      <!-- Modal Content -->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title">
            <strong>Best Match</strong>
          </h2>
        </div>

        <div class="modal-body">
          <h2 id="matchName"></h2>
          <img id="matchImg" src="" alt="">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div> <!-- End of Container  -->
<script type ="text/javascript">
$(document).ready(function() {


    var config = {
        '.chosen-select': {},
        '.chosen-select-deselect': {
            allow_single_deselect: true,
        },
        '.chosen-select-no-single': {
            disable_search_threshold: 10,
        },
        '.chosen-select-no-results': {
            no_results_text: 'Nothing found!',
        },
        '.chosen-select-width': {
            width: "95%",
        }
    }
    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }


    // Capture the form inputs 
    $("#submit").on("click", function() {
        //isValid is automatically set to true
        var isValid = true;
        // Form validation
        function validateForm() {
            //if form-control is blank then invalid is changed to false
            $('.form-control').each(function() {
                if ($(this).val() === '')
                    isValid = false;
            });
            //if chosen select is blank then isvalid is changed to false
            $('.chosen-select').each(function() {
                if ($(this).val() === "")
                    isValid = false
            })
            return isValid;
        };
        // If all required fields are filled
        // if (validateForm() == true){
        if (isValid) {
            // Create an object for the user's data
            var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [
                    $("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(),
                ]
            }


            console.log("This is userData.scores: " + userData.scores);


            // Grab the URL of the website
            var currentURL = window.location.origin;
            $.post(currentURL + '/api/friends', userData, function(data) {
                // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $("#matchName").text(data.name);
                $('#matchImg').attr("src", data.photo);
                // Show the modal with the best match 
                $("#resultsModal").modal('toggle');
                console.log("This is data: " + data.name);
                console.log("user data: " + userData);
            });
        } else {
            alert("You did not fill out all the fields in the form.");
        }
        $('#close').on('click', function() {
            $.get('/survey', function(req, res) {
                $(".body").load(res);
            });
        });
        return false;
    }); // end of on click // 
}); // end of document ready //
</script>


</body>
</html>